# Chrome Web Store リリース計画

## 調査結果サマリー

### 1. Chrome Web Store Developer Dashboard 要件

#### 開発者アカウント
- **登録料**: 一回限り $5.00 USD
- **支払い方法**: Google Payments経由
- **必要情報**: Googleアカウント、支払い情報
- **注意点**: 2025年現在、新規開発者は登録時に即座に支払いが必要（以前は公開時のみ）

#### アカウント特典
- 最大20個の拡張機能を公開可能
- プライベートドメインへの公開も可能

### 2. 拡張機能の審査基準とポリシー

#### Manifest V3 必須要件（2025年6月以降）
- **タイムライン**: Chrome 139（2025年6月）でManifest V2のサポート終了
- **主な変更点**:
  - Service Workerの使用（永続的なbackground pageは廃止）
  - リモートコード実行の禁止
  - 全機能がパッケージ内で完結している必要あり

#### セキュリティ要件
- **禁止事項**:
  - eval()の使用
  - 外部スクリプトタグの参照
  - リモートソースからの複雑なコマンド実行
- **許可事項**:
  - A/Bテスト用の設定ファイル取得（ロジックは拡張機能内に含む）
  - APIとの通信（ユーザーデータポリシーに準拠）

#### プライバシーポリシー要件
- **必須条件**: ユーザーデータを扱う場合は必須
- **記載内容**:
  - データの収集・使用・共有方法
  - データを共有する全ての関係者
  - セキュリティ対策
  - データ保持期間
  - ユーザーのデータアクセス・変更・削除方法
- **掲載場所**: Chrome Web Store Developer Dashboardに必須登録
- **制限事項**:
  - データブローカーへの転送禁止
  - 信用情報判定への使用禁止
  - 広告目的でのウェブ閲覧履歴収集禁止

### 3. 必要なアセットとドキュメント

#### 必須アセット
1. **拡張機能アイコン**
   - 128x128px PNG形式
   - 実際のアイコンは96x96px、周囲16pxは透明パディング

2. **スクリーンショット**
   - 最低1枚、推奨5枚
   - 推奨サイズ: 1280x800px
   - 最小サイズ: 640x400px
   - PNG形式

3. **小さいプロモーション画像**
   - 440x280px（必須）
   - ブランドを表現する画像（単なるスクリーンショットは避ける）

#### オプションアセット
- **大きいプロモーション画像**: フィーチャー掲載用
- **マーキープロモーション画像**: トップページ掲載用

#### 説明文
- **短い説明**: 132文字以内
- **詳細説明**: 機能と利点を明確に記載
- **カテゴリ**: 適切なカテゴリを選択
- **言語**: 英語（デフォルト）、日本語対応済み

### 4. 技術的な準備

#### ファイルサイズ制限
- **Chrome Web Store**: 最大2GB
- **スクリプトサイズ**: 単一スクリプト最大500MB、全コンテンツスクリプト合計1GB

#### 権限の正当化
現在の拡張機能で使用している権限:
- `sidePanel`: サイドパネル表示用
- `storage`: ユーザー設定の保存
- `activeTab`: アクティブタブへのアクセス
- `tabs`: タブ管理
- `offscreen`: バックグラウンドでの音声再生とDOM操作
- `scripting`: コンテンツスクリプトの注入

**Offscreen API の正当化理由**:
- IFRAME_SCRIPTING: NotebookLMのiframeを操作
- AUDIO_PLAYBACK: 音声概要の再生
- DOM_SCRAPING: NotebookLMページからのデータ取得

### 5. 現在のプロジェクト状態

#### 技術仕様確認結果
- **Manifest Version**: 3（準拠済み）
- **現在のバージョン**: 1.3.0
- **プロジェクトサイズ**: 5.8MB（制限内）
- **ファイル数**: 54ファイル
- **アイコン**: 正しいPNG形式で16x16、48x48、128x128準備済み
- **国際化**: 英語と日本語対応済み
- **ライセンス**: MIT License

#### 潜在的な審査リスク
1. **Offscreen API使用**: 正当な理由の説明が必要
2. **ホスト権限**: notebooklm.google.comへのアクセス権限の正当化
3. **DOM操作**: コンテンツスクリプトでの操作内容の明確化

## リリース前チェックリスト

### 開発者アカウント準備
- [ ] Google開発者アカウントの作成
- [ ] $5登録料の支払い
- [ ] 開発者情報の入力

### プライバシーとセキュリティ
- [ ] プライバシーポリシーの作成（英語・日本語）
- [ ] プライバシーポリシーのホスティング先決定
- [ ] データ収集・使用方法の明確化
- [ ] HTTPS通信の確認

### アセット準備
- [x] アイコン（16x16、48x48、128x128）- 準備済み
- [ ] スクリーンショット5枚（1280x800px）
  - [ ] サイドパネルの一覧表示
  - [ ] 音声再生中の画面
  - [ ] 検索・フィルタリング機能
  - [ ] タグ管理機能
  - [ ] 設定画面
- [ ] 小さいプロモーション画像（440x280px）
- [ ] ストア掲載用の説明文（英語・日本語）
  - [ ] 短い説明（132文字以内）
  - [ ] 詳細説明

### 技術的準備
- [ ] manifest.jsonの最終確認
- [ ] 不要なファイルの削除
- [ ] console.logの削除または本番用に調整
- [ ] エラーハンドリングの確認
- [ ] パフォーマンステスト

### 権限の正当化文書
各権限について以下を準備：
- [ ] `sidePanel`: ノートブック一覧を常時表示するため
- [ ] `storage`: ユーザーのタグ設定やキャッシュデータを保存するため
- [ ] `activeTab`: 現在のタブでNotebookLMを操作するため
- [ ] `tabs`: 音声再生用のタブを管理するため
- [ ] `offscreen`: バックグラウンドで音声を再生し、NotebookLMのDOM操作を行うため
- [ ] `scripting`: NotebookLMページにコンテンツスクリプトを注入するため
- [ ] ホスト権限: NotebookLMのデータを読み取り、音声機能を制御するため

### テスト項目
- [ ] Chrome 114以降での動作確認
- [ ] 全機能の動作テスト
  - [ ] ノートブック一覧取得
  - [ ] 音声再生・停止・シーク
  - [ ] 検索・フィルタリング
  - [ ] タグ管理
  - [ ] 多言語切り替え
- [ ] エラー状態のテスト
  - [ ] ネットワークエラー
  - [ ] NotebookLM未ログイン
  - [ ] 拡張機能リロード
- [ ] メモリリークチェック
- [ ] パフォーマンス測定

### リリース手順
1. [ ] .gitignoreに記載されたファイルを除外してZIPファイル作成
2. [ ] Chrome Web Store Developer Dashboardにログイン
3. [ ] 新しいアイテムを作成
4. [ ] ZIPファイルをアップロード
5. [ ] ストア掲載情報を入力
6. [ ] プライバシー情報を入力
7. [ ] 権限の正当化を記入
8. [ ] レビュー申請

### 審査期間中の対応
- [ ] 審査結果の監視（通常数営業日）
- [ ] 却下された場合の修正準備
- [ ] ユーザーフィードバック用のGitHub Issuesテンプレート作成

## 推定タイムライン

1. **準備期間**（1-2週間）
   - アセット作成
   - プライバシーポリシー作成
   - テスト実施

2. **申請・審査**（3-7営業日）
   - 初回審査
   - 修正対応（必要な場合）

3. **公開後**
   - ユーザーフィードバックの収集
   - バグ修正とアップデート

## 注意事項

1. **Manifest V3完全移行**: 2025年6月までに必須
2. **プライバシー重視**: ユーザーデータの扱いに関する説明を明確に
3. **権限最小化**: 必要最小限の権限のみ要求
4. **透明性**: 各機能と権限の関係を明確に説明

## 参考リンク

- [Chrome Web Store Developer Dashboard](https://chrome.google.com/webstore/devconsole)
- [Chrome Extension Documentation](https://developer.chrome.com/docs/extensions/)
- [Manifest V3 Migration Guide](https://developer.chrome.com/docs/extensions/develop/migrate)
- [Chrome Web Store Program Policies](https://developer.chrome.com/docs/webstore/program-policies)
