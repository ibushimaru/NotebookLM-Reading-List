# NotebookLM Reading List Extension - Claude Development Guide

## プロジェクト概要
NotebookLM Reading List Extension は、Google NotebookLMのノートブックを管理し、音声概要機能を強化するChrome拡張機能です。

## 主要機能
1. **ノートブック管理**
   - NotebookLMのノートブック一覧を表示
   - アイコンフィルター機能
   - タグ管理機能
   - ソート機能（作成日、更新日、タイトル）

2. **音声概要機能**
   - 音声の再生/一時停止
   - シークバーによる再生位置制御
   - 再生状態の視覚的フィードバック
   - オフスクリーン音声再生のサポート

## 最近の変更履歴
- シークバーのドラッグ機能実装
- 再生中のノートブックの視覚的強調（オレンジ色）
- 音声プレーヤーUIの改善
- アイコンフィルターのデフォルトオン設定

## 開発ガイドライン

### コミット・PR管理
**重要**: レート制限を避けるため、以下のルールを厳守してください：

1. **ローカルでの完全なテスト**
   - すべての変更をローカルで十分にテストする
   - 複数の変更をまとめて実装する

2. **コミットの集約**
   - 関連する変更は1つのコミットにまとめる
   - 細かいコミットの連続は避ける
   - `git commit --amend`を活用して既存コミットに追加

3. **PR作成のタイミング**
   - 機能が完全に実装されてからPRを作成
   - WIPのPRは避ける
   - PRごとに明確な目的を持つ

### コードスタイル
- インデント: スペース2つ
- セミコロン: 必須
- コメント: 日本語可（ただし関数名・変数名は英語）
- CSS: BEM命名規則を基本とする

### テストコマンド
```bash
# 拡張機能の読み込み
# Chrome: chrome://extensions/ で「パッケージ化されていない拡張機能を読み込む」

# CSSの変更確認
# 拡張機能を再読み込み（Ctrl+R）またはハード再読み込み（Ctrl+Shift+R）
```

### 重要なファイル構造
```
src/
├── sidepanel/
│   ├── sidepanel.js    # メインのUI制御
│   ├── sidepanel.css   # スタイリング
│   └── sidepanel.html  # UIテンプレート
├── content/
│   └── content.js      # NotebookLMページとの通信
├── background/
│   └── background.js   # バックグラウンド処理
└── offscreen/
    └── offscreen.js    # 音声再生制御
```

### 既知の問題と対策
1. **`:has()`セレクタの互換性**
   - 一部のブラウザで深いネストが動作しない
   - JavaScriptでクラスベースの管理を推奨

2. **音声再生の制限**
   - 初回再生時はタブのアクティブ化が必要
   - オフスクリーンAPIを使用して制限を回避

### 今後の課題
- [ ] テストコードの追加
- [ ] パフォーマンスの最適化
- [ ] より詳細なエラーハンドリング
- [ ] 国際化（i18n）の完全サポート

## 連絡先
- GitHub: https://github.com/ibushimaru/NotebookLM-Reading-List
- Issues: プロジェクトのIssuesページで報告

---
最終更新: 2025/06/10